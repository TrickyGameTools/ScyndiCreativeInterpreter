import platform
from datetime import date
from os import system

Today = date.today().strftime("%b %d %y")
Fmt = """# SRF Identification file!
# Please note that this file may not live in version control repositories, as it is generated by bsrf.ps1
# and will as result spook up the repository.

[srf]
Engine=SCI
Description=Resource for Scyndi's Creative Interpreter
Build=%s
"""

print("\x1b[32mScyndi's Creative Interpreter\x1b[33m\tBuilder script for the run-time environment\x1b[0m\n(c) Jeroen P. Broks\n")
def Doing(a,b): print("\x1b[93m%s: \x1b[96m%s\x1b[0m"%(a,b))
Doing("Platform",platform.system())
print("\n\n")

# SRF
Doing("Writing","Identification for SRF")
with open("srf/ID/Identify.ini", "w") as text_file:
    text_file.write(Fmt%Today)
Doing("Packaging","SRF")
system("jalondi create -y -m -cm zlib -fc zlib ../SCI_Exe/SCI_Run.srf srf")


# Base Functions
Files = []
Libs = []

def Add(cat,files):
    for f in files: 
        Doing(cat,f)
        Files.append(f)

def AddLib(cat,files):
    for f in files: 
        Doing("Lib "+cat,f)
        Files.append(f)
        
        
if platform.system()=="Linux":
    Add("zlib",Glob("../../../Libs/JCR6/3rdParty/zlib/src/*.c"))
else:
    AddLib("zlib",["../../../Libs/JCR6/3rdParty/3rdParty/zlib/zlib"])